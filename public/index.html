
<!DOCTYPE html>

<html>
<head>
  <meta charset="utf-8">

  <title>Data Dico</title>

  <!-- Bootstrap Core CSS -->
  <!-- <link href="bootstrap.min.css" rel="stylesheet"> -->
  <!-- <link href="css/bootstrap.min.css" rel="stylesheet"> -->


  <!-- Theme CSS -->
  <!-- <link href="css/blog-home.css" rel="stylesheet"> -->
  <!-- <link href="clean-blog.min.css" rel="stylesheet"> -->




  <!-- <script src="/javascripts/libs/jquery.min.js" type="text/javascript"></script> -->

  <!-- <link rel="stylesheet" type="text/css" href="/style.css"> -->
  <!-- <link rel="stylesheet" type="text/css" href="clean-blog.min.css"> -->



  <!-- <link href='http://fonts.googleapis.com/css?family=Roboto+Slab:400,700|Roboto:700,300' rel='stylesheet' type='text/css'> -->
  <!-- <link rel="stylesheet" type="text/css" href="/highlight.css"> -->


  <!-- jQuery -->
  <!-- <script src="jquery.min.js"></script> -->

  <!-- Bootstrap Core JavaScript -->
  <!-- <script src="bootstrap.min.js"></script> -->

  <!-- Contact Form JavaScript -->
  <!-- <script src="jqBootstrapValidation.js"></script> -->
  <!-- <script src="contact_me.js"></script> -->

  <!-- Theme JavaScript -->
  <!-- <script src="clean-blog.min.js"></script> -->







  <!-- Bootstrap Core CSS -->
  <link href="bootstrap.min.css" rel="stylesheet">

  <!-- Theme CSS -->
  <link href="clean-blog.min.css" rel="stylesheet">


  <script src="/javascripts/libs/jquery.min.js" type="text/javascript"></script>

  <!-- <link rel="stylesheet" type="text/css" href="/style.css"> -->
  <link rel="stylesheet" type="text/css" href="clean-blog.min.css">


  <!-- <link href='http://fonts.googleapis.com/css?family=Roboto+Slab:400,700|Roboto:700,300' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="/highlight.css"> -->


  <!-- jQuery -->
  <script src="jquery.min.js"></script>

  <!-- Bootstrap Core JavaScript -->
  <script src="bootstrap.min.js"></script>

  <!-- Contact Form JavaScript -->
  <script src="jqBootstrapValidation.js"></script>
  <script src="contact_me.js"></script>

  <!-- Theme JavaScript -->
  <script src="clean-blog.min.js"></script>


  <link href="https://fonts.googleapis.com/css?family=Harmattan|PT+Sans|Raleway|Reem+Kufi" rel="stylesheet">
      <style>
        body {
          /*font-family: 'Tangerine', serif;*/
  /*font-family: 'Reem Kufi', sans-serif;*/
  font-family: 'PT Sans', sans-serif;
  /*font-family: 'Raleway', sans-serif;*/
  /*font-family: 'Harmattan', sans-serif;*/
          font-size: 20px;
        }
      </style>

</head>
<body>

  <!-- Navigation -->
  <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
      <div class="container-fluid">
          <!-- Brand and toggle get grouped for better mobile display -->
          <div class="navbar-header page-scroll">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                  <span class="sr-only">Toggle navigation</span>
                  Menu <i class="fa fa-bars"></i>
              </button>
              <a class="navbar-brand" href="index.html">DATA DICO</a>
          </div>

          <!-- Collect the nav links, forms, and other content for toggling -->
          <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav navbar-right">
                  <li>
                      <a href="about.html">About</a>
                  </li>
                  <li>
                      <a href="datarepo.html">Data-repo</a>
                  </li>
                  <li>
                      <a href='http://github.com/benheubl'>Github</a>
                  </li>
                  <li>
                      <a href="index.html">Home</a>
                  </li>
              </ul>
          </div>
          <!-- /.navbar-collapse -->
      </div>
      <!-- /.container -->
  </nav>

  <!-- Page Header -->
  <!-- Set your background image for this header on the line below. -->
  <header class="intro-header" style="background-image: url('img/home-bg.jpg')">
      <div class="container">
          <div class="row">
              <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                  <div class="site-heading">
                      <h1>DATA DICO</h1>
                      <hr class="large">
                      <span class="subheading">Data Science Blog, Ben Heubl</span>
                      <br>
                      <a href="https://twitter.com/benheubl" class="twitter-follow-button" data-show-count="false">Follow @benheubl</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
                  </div>
              </div>
          </div>
      </div>
  </header>

  <div class="container">

      <div class="row">

          <!-- Blog Entries Column -->
          <div class="col-md-8">

              <h1 class="page-header">
                  ALL POSTS
                  <!-- <small>by Ben Heubl</small> -->
              </h1>

              <!-- First Blog Post -->


              <a href="models/">
                  <h2 class="post-title">
                      <a href="models/">SECRETS OF THE FASHION MODEL INDUSTRY</a>
                  </h2>
                  <h3 class="post-subtitle">
                  </h3>
              </a>
              <p class="post-meta">Posted by <a href="models/">Ben</a> on August 20, 2016</p>
              <a href="models/">
              </a>

              <hr>

              <!-- <a href="pharma-pays/">
                  <h2 class="post-title">
                      <a href="pharma-pays/">WHO PAYS THE DOC?</a>
                  </h2>
                  <h3 class="post-subtitle">
                  </h3>
              </a>
              <p class="post-meta">Posted by <a href="pharma-pays/">Ben</a> on July 30, 2016</p>
              <a href="pharma-pays/">
              </a>
              <hr> -->


                  <!-- <a href="sls/">
                      <h2 class="post-title">
                          <a href="sls/">BEST STRATEGY for Streetleague Skateboarding</a>
                      </h2>
                      <h3 class="post-subtitle">
                      </h3>
                  </a>
                  <p class="post-meta">Posted by <a href="sls/">Ben</a> on July 25, 2016</p>
                  <a href="sls/">
                  </a>

              <hr> -->

              <!-- Second Blog Post -->
              <a href="mexico/">
                  <h2 class="post-title">
                      <a href="mexico/">A TALE OF MISSING WOMEN</a>
                  </h2>
                  <h3 class="post-subtitle">
                  </h3>
              </a>
              <p class="post-meta">Posted by <a href="mexico/">Ben</a> on July 21, 2016</p>
              <a href="mexico/">
              </a>
              <hr>


              <!-- Third Blog Post -->
              <!-- <a href="strategy-to-speak/">
                  <h2 class="post-title">
                      <a href="strategy-to-speak/">THE STRATEGY TO SPEAK</a>
                  </h2>
                  <h3 class="post-subtitle">
                  </h3>
              </a>
              <p class="post-meta">Posted by <a href="strategy-to-speak/">Ben</a> on July 20, 2016</p>
              <a href="strategy-to-speak/">
              </a>
              <hr> -->


              <!-- Pager -->
              <!-- <ul class="pager">
                  <li class="previous">
                      <a href="#">&larr; Older</a>
                  </li>
                  <li class="next">
                      <a href="#">Newer &rarr;</a>
                  </li>
              </ul> -->








          </div>




          <!-- Blog Sidebar Widgets Column -->
          <div class="col-md-4">

              <!-- Blog Search Well -->
              <!-- <div class="well">
                  <h4>Blog Search</h4>
                  <div class="input-group">
                      <input type="text" class="form-control">
                      <span class="input-group-btn">
                          <button class="btn btn-default" type="button">
                              <span class="glyphicon glyphicon-search"></span>
                      </button>
                      </span>
                  </div>
              </div> -->



              <!-- Blog Categories Well -->
              <!-- <div class="well">
                  <h1>Categories</h1>
                  <div class="row">
                      <div class="col-lg-6">
                        <ul class="list-inline text-left small">
                              <li><a href="#">Models and machine learning</a>
                              </li>
                              <li><a href="#">Data analysis</a>
                              </li>
                              <li><a href="#">Data journalism</a>
                              </li>
                          </ul>
                      </div>

                  </div>
              </div> -->

              <!-- Blog Categories Well -->
              <!-- <div class="well">
                  <h1>Economist posts</h1>
                  <div class="row">
                      <div class="col-lg-6">
                        <ul class="list-inline text-left small">
                              <li><a href="http://www.economist.com/blogs/graphicdetail/2016/04/daily-chart-8">Germany refugee index</a>
                              </li>
                              <li><a href="http://www.economist.com/blogs/graphicdetail/2016/07/daily-chart-18">Broadway prediction model</a>
                              </li>
                              <li><a href="http://www.economist.com/blogs/graphicdetail/2016/07/daily-chart-19">US convention - sentiment analysis</a>
                              </li>
                          </ul>
                      </div>

                  </div>
              </div> -->

              <!-- Side Widget Well -->
              <div class="well">
                  <h1>About me:</h1>
                  <ul class="list-inline text-left small">
                  <p class="small">Data Dico means “Data speaks” or “Data explains”. Data can tell stories. Data science helps to tickle out the good and the bad ones. <br><br> I currently work as a digital data journalist at the Economist newspaper in London. Here I publish in my own right.
                  </p>
              </div>

          </div>

      </div>
      <!-- /.row -->



  </div>


  <!-- <h2>posts</h2>
  <div class='list'>
    <a href="nba-win-loss/">NBA Win/Loss Records</a>
    <a href="test-bh/">Test-BH</a>

  <hr> -->

  <hr>

  <!-- <article>
      <div class="container">
          <div class="row">
              <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
              <div id="disqus_thread"></div>
              </div>
          </div>
      </div>
  </article>
  <hr> -->

  <!-- Footer -->



  <footer>
      <div class="container">
          <div class="row">
              <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                  <ul class="list-inline text-center">
                    <li>
                        <a href="http://twitter.com/benheubl">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>

                    <li>
                        <a href="href='http://github.com/benheubl">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                  </ul>
                  <p class="copyright text-muted">Copyright &copy; Data Dico, 2016</p>
              </div>
          </div>
      </div>
  </footer>


  <!-- <div class='header'>
    <div class='header-left'>
      <a href='http://DSB.com'>Data Science & Journalism Blog</a>
    </div>
    <div class='header-right'>
      <span style='opacity: .5'>Ben Heubl</span>
      <a href='http://github.com/1wheel'>
        <img src='/images/gh-32px.png'></img>
      </a>
      <a href='http://twitter.com/adamrpearce'>
        <img src='/images/twitter.png'></img>
      </a>
      <a href='http://twitter.com/adamrpearce'>
        <img src='/images/email.png'></img>
      </a>
    </div>
  </div> -->

  <!-- <div id='gallery'></div> -->

  <!-- <h2>libraries</h2>
  <div class='list'>
    <a href="http://1wheel.github.io/graph-scroll/">graph-scroll</a>
    <a href="https://github.com/1wheel/d3-starterkit">d3-starterkit</a>
    <a href="http://1wheel.github.io/swoopy-drag/">swoopy-drag</a>
  </div> -->

  <!-- <h2>posts</h2>
  <div class='list'>
    <a href="nba-win-loss/">NBA Win/Loss Records</a> -->
    <!-- <a href="nba-minutes/">Point Differentials of 2015 NBA Games</a> -->
    <!-- <a href="gsw-streak/">Golden State's 2015 Point Differentials</a>
    <a href="lyric-type/">Lyric Typing</a>
    <a href="stacked-bump/">Stacked Bump Charts</a>
    <a href="data-exploration">Data Exploration With D3</a>
    <a href="/blog/2015/02/22/svg-path-strings/">SVG Path Strings</a>
    <a href="/blog/2015/01/04/coloring-maps-with-d3/">Coloring Maps</a>
    <a href="/convex-hulls">Convex Hulls</a>
    <a href="/dragon-curve">Dragon Curve</a>
    <a href="/golf-paths">Golf Paths</a>
    <a href="/drawdown">Drawdown</a>
    <a href="/215-teeth">215 Teeth / 1008 Beats</a>
    <a href="/blog/2014/06/23/even-fewer-lamdas-with-d3/">Even Fewer Lambdas</a>
    <a href="/population-division">Population Division</a>
    <a href="/synth">Making Music With D3</a>
    <a href="/twisters-post">Twisters</a>
    <a href="/nba_draft">NBA Draft</a>
    <a href="/meteor-map">Meteor Map</a>
    <a href="/film-strips-post">Film Strips</a>
    <a href="/whale-words">Whale Words</a>
    <a href="/unemployment-rates">Unemployment Rates</a>
    <a href="/zoomable-sierpinski-triangle-with-d3-js">Zoomable Sierpinski Triangle</a>
    <a href="/interactive-visualization-of-white-house-petition-signatures">White House Petition Signatures</a>
    <a href="/next-project">Next Project</a>
    <a href="/redditgraphs-retrospective">Redditgraphs Retrospective</a>
    <a href="/reddit-comment-visualizer">Reddit Comment Visualizer</a>
    <a href="/yglesias-on-amazons-pe-ratio">Yglesias on Amazon's P/E Ratio</a>
    <a href="/speed-issues-with-gokos-online-dominion-implementation">Speed Issues Goko Dominion</a>
    <a href="/connect-4-ai-how-it-works">Connect 4 AI: How It Works</a>
    <a href="/maximin-connect-4-completed">Maximin Connect 4 Completed</a>
    <a href="/first-post">First Post</a> -->
  <!-- </li> -->

  <script>

  /**
   *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
   *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables */
  /*
  var disqus_config = function () {
      this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
      this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
  };
  */
  // (function() { // DON'T EDIT BELOW THIS LINE
  //     var d = document, s = d.createElement('script');
  //     s.src = '//datadico.disqus.com/embed.js';
  //     s.setAttribute('data-timestamp', +new Date());
  //     (d.head || d.body).appendChild(s);
  // })();
  </script>
  <!-- <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript> -->




</body>





<style>

.list a{
  width: 800px;
  display: inline-block;
}
.list{
  padding-bottom: 20px;
}

#gallery{
  margin-top: 60px;
  margin-bottom: 60px;
}

svg{
  margin: 0px auto;
  display: block;
  overflow: visible;
}

.border{
  fill: rgba(0,0,0,0);
  stroke: black;
}

text{
  fill: white;
}

</style>


<!-- jQuery -->
<script src="jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="bootstrap.min.js"></script>

<!-- Contact Form JavaScript -->
<script src="jqBootstrapValidation.js"></script>
<script src="contact_me.js"></script>

<!-- Theme JavaScript -->
<script src="clean-blog.min.js"></script>


<script src="/javascripts/libs/d3.4.11.js" type="text/javascript"></script>
<script src="/javascripts/libs/lodash.js" type="text/javascript"></script>
<script src="/javascripts/libs/d3-jetpack-v1.js" type="text/javascript"></script>
<script src="/javascripts/libs/d3-starterkit-v0.js" type="text/javascript"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>




<!-- <script>
var projects = [
  {img: 'who-marries-whom',     date: '02/2016',   url: 'http://www.bloomberg.com/graphics/2016-who-marries-whom/'},
  {img: 'donor-network',        date: '02/2016',   url: 'http://www.bloomberg.com/politics/graphics/2016-fec-filings/febuary/bush-donors/'},
  {img: 'nba-win-loss',         date: '01/2016',   url: 'http://roadtolarissa.com/nba-win-loss/'},

  {img: 'crossover-sales',      date: '01/2016',   url: 'http://www.bloomberg.com/graphics/2016-crossover-sales/'},
  {img: 'nba-minutes',          date: '01/2016',   url: 'http://roadtolarissa.com/nba-minutes/'},

  {img: 'trading-analysis',     date: '12/2015',   url: 'http://www.bloomberg.com/features/2015-stock-chart-trading-game/analysis/'},
  {img: 'florida-redistricting',date: '12/2015',   url: 'http://www.bloomberg.com/politics/graphics/2015-redistricting/'},

  {img: 'gsw-streak',           date: '11/2015',   url: 'http://roadtolarissa.com/gsw-streak/'},
  {img: 'year-ahead',           date: '11/2015',   url: 'http://www.bloomberg.com/graphics/year-ahead-2016/'},

  {img: 'individual-donor',     date: '10/2015',   url: 'http://www.bloomberg.com/politics/graphics/2015-october-fec-filings/charts/'},
  {img: 'speaker-timeline',     date: '10/2015',   url: 'http://www.bloomberg.com/politics/graphics/2015-paul-ryan-speaker-of-the-house/'},
  {img: 'spoofing',             date: '09/2015',   url: 'http://www.bloomberg.com/graphics/2015-spoofing/'},
  {img: 'fifa-scandal',         date: '07/2015',   url: 'http://www.bloomberg.com/graphics/2015-fifa-scandal/'},
  {img: 'stacked-bump',         date: '07/2015',   url: 'http://roadtolarissa.com/stacked-bump/'},
  // {img: 'super-pac-table',      date: '08/2015',   url: 'http://www.bloomberg.com/politics/graphics/2015-october-fec-filings/table/'},
  {img: 'money-map',            date: '09/2015',   url: 'http://www.bloomberg.com/politics/graphics/2015-presidential-money-map/'},

  {img: 'lyric-type',            date: '08/2015',   url: 'http://roadtolarissa.com/lyric-type/'},


  {img: 'what-is-code',         date: '06/2015',   url: 'http://www.bloomberg.com/whatiscode'},
  {img: 'dangerous-jobs',       date: '05/2015',   url: 'http://www.bloomberg.com/graphics/2015-dangerous-jobs/'},
  {img: 'uk-election',          date: '05/2015',   url: 'http://www.bloomberg.com/graphics/2015-uk-election/'},
  {img: 'uk-splatter',          date: '05/2015',   url: 'http://www.bloomberg.com/graphics/2015-uk-election/messy.html'},
  {img: 'weed-index',           date: '04/2015',   url: 'http://www.bloomberg.com/graphics/2015-weed-index/'},
  {img: 'ncaa-gambling',        date: '04/2015',   url: 'http://www.bloomberg.com/graphics/2015-march-madness-gambling/'},
  {img: 'basketball-fund',      date: '03/2015',   url: 'http://www.bloomberg.com/graphics/2015-march-madness-basketball-fund/'},
  {img: 'measles-outbreaks',    date: '02/2015',   url: 'http://www.bloomberg.com/graphics/2015-measles-outbreaks/'},
  {img: 'oscar-winners',        date: '02/2015',   url: 'http://www.bloomberg.com/graphics/2015-oscar-winners/'},
  {img: 'superbowl-salary',     date: '01/2015',   url: 'http://www.bloomberg.com/graphics/2015-nfl-super-bowl-salary/'},
  {img: 'auto-sales',           date: '01/2015',   url: 'http://www.bloomberg.com/graphics/2015-auto-sales/'},
  {img: 'space-race',           date: '01/2015',   url: 'http://www.bloomberg.com/news/features/2015-01-22/the-new-space-race-one-man-s-mission-to-build-a-galactic-internet-i58i2dp6'},



  {img: 'campaign-declaration', date: '11/2014',   url: 'http://www.bloomberg.com/politics/articles/2014-11-25/when-do-presidential-candidates-announce'},
  {img: 'live-midterm-results', date: '11/2014',   url: 'http://www.bloomberg.com/politics/topics/2014-midterms'},
  {img: 'senate-ads',           date: '10/2014',   url: 'http://www.bloomberg.com/politics/features/2014-10-27/the-persuadables'},
  {img: 'midterm-ads',          date: '10/2014',   url: 'http://www.bloomberg.com/politics/graphics/2014-senate-ads-and-issues/'},
  {img: 'governor-jobs',        date: '10/2014',   url: 'http://www.bloomberg.com/politics/graphics/2014-incumbent-governors/'},

  {img: 'zhou-crackdown',       date: '09/2014',   url: 'http://www.bloomberg.com/infographics/2014-08-04/how-to-catch-a-tiger.html'},
  {img: 'world-cup',            date: '05/2014',   url: 'http://www.bloomberg.com/visual-data/world-cup/#0,0,-1'},


  {img: 'golf-paths',           date: '10/2014',   url: 'http://roadtolarissa.com/golf-paths/'},
  {img: 'drawdown',             date: '09/2014',  url: 'http://roadtolarissa.com/drawdown/'},
  {img: 'svg-path',             date: '02/2015',  url: 'http://roadtolarissa.com/blog/2015/02/22/svg-path-strings/'},

  {img: 'coloring-maps',        date: '01/2015',   url: 'http://roadtolarissa.com/blog/2015/01/04/coloring-maps-with-d3/'},
  {img: 'data-exploration',     date: '04/2015',   url: 'http://roadtolarissa.com/data-exploration/'},
  {img: 'graph-scroll',         date: '03/2015',   url: 'http://1wheel.github.io/graph-scroll/'},
  {img: 'convex-hulls',         date: '12/2014',   url: 'http://roadtolarissa.com/convex-hulls/'},



  {img: '215-teeth',            date: '06/2014',   url: 'http://roadtolarissa.com/215-teeth/'},
  {img: 'joymap',               date: '03/2014',   url: 'http://roadtolarissa.com/population-division/'},
  {img: 'synth-scale',          date: '01/2014',   url: 'http://roadtolarissa.com/synth/'},
  {img: 'twisters',             date: '10/2013',   url: 'http://roadtolarissa.com/twisters/'},
  {img: 'nba-draft',            date: '06/2013',   url: 'http://roadtolarissa.com/nba-draft/'},
  {img: 'meteors',              date: '05/2013',   url: 'http://roadtolarissa.com/meteors/'},
  {img: 'film-strips',          date: '05/2013',   url: 'http://roadtolarissa.com/film-strips/'},
  {img: 'whale-words',          date: '01/2013',   url: 'http://www.roadtolarissa.com/whalewords'},
  {img: 'unemployment-rates',   date: '01/2013',    url: 'http://www.roadtolarissa.com/unemployment'},
  {img: 'sierpinski-triangle',  date: '12/2012',   url: 'http://roadtolarissa.com/triangles/'},
  {img: 'whitehouse-petitions', date: '12/2012',   url: 'http://www.roadtolarissa.com/whitehouse'},
  {img: 'redditgraphs',         date: '10/2012',   url: 'http://www.roadtolarissa.com/redditgraphs'},
  {img: 'backgammon',           date: '10/2012',    url: 'http://www.roadtolarissa.com/javascript/hangout-boardgames/'},
  {img: 'connect-4',            date: '09/2012',     url: 'http://www.roadtolarissa.com/connect-4-ai-how-it-works/'},
];


// 375


projects = _.sortBy(projects, ƒ('date', d3.time.format('%m/%Y').parse)).reverse()

var s = 750/4,
    numX = 4,
    width = s*numX,
    height = s*Math.ceil(projects.length/numX)

var boxes = projects.map(function(d, i){
  return {
    pos: [s*(i % numX) + s/2, s*(Math.floor(i/numX)) + s/2],
    i: i,
    id: 'clip-' + i,
    clipId: 'url(#clip-' + i + ')',
    name: d.img,
    imgUrl: '/images/thumbnails/' + d.img + '.png',
    url: d.url,
    date: d.date,
  }
})


var svg = d3.select('#gallery')
  .append('svg')
    .attr({width: width, height: height})

svg.append('defs').dataAppend(boxes, 'clipPath')
    .attr('id', ƒ('id'))
  .append('rect')
    .attr({width: s, height: s})
    .attr({x: -s/2, y: -s/2})
    .each(function(d){ d.clip = d3.select(this) })


var boxGs = svg.dataAppend(boxes, 'g')
    .translate(ƒ('pos'))
    .attr('clip-path', ƒ('clipId'))
    .on('mouseover', function(){
      this.parentNode.appendChild(this)
    })
    .on('mousemove', function(d){
      sizeSquare(d, _.max(d3.mouse(this).map(Math.abs))/(s/2))
    })
    .on('mouseout', function(d){ sizeSquare(d, 1) })
    .on('click', function(d){ window.open(d.url, '_blank') })

// boxGs.append('rect')
//     .attr({width: s*2, height: s*2})
//     .attr({x: -s, y: -s})
//     .attr('fill', function(){ return randColor() })
//     .each(function(d){ d.rect = d3.select(this) })

boxGs.append('image')
    .attr({width: s*2, height: s*2})
    .attr({x: -s, y: -s})
    .attr('xlink:href', ƒ('imgUrl'))
    .each(function(d){ d.img = d3.select(this) })


boxGs.append('rect.border')
    .attr({width: s, height: s})
    .attr({x: -s/2, y: -s/2})
    .each(function(d){ d.border = d3.select(this) })

boxGs.append('rect.border')
    .attr({width: s, height: 0})
    .attr({x: -s/2, y: -s/2})
    .each(function(d){ d.bot = d3.select(this) })

boxGs.append('text').attr({dx: '1em', dy: '-1.0em'})
    .text(ƒ('name'))
    .style('font-size', '0px')
    .attr('text-anchor', 'start')
    .each(function(d){ d.name = d3.select(this) })

boxGs.append('text').attr({dx: '-1em', dy: '-1.0em'})
    .text(ƒ('date'))
    .style('font-size', '0px')
    .attr('text-anchor', 'end')
    .each(function(d){ d.date = d3.select(this) })

function sizeSquare(d, t){
  t = clamp(0, t, 1)
  t = Math.pow(t, 2)

  var l = (2 - t)*s

  var rectAttr = {width: l, height: l, x: -l/2, y: -l/2}

  d.clip.attr(rectAttr)
  d.border.attr(rectAttr)
      .style('stroke-width', (20*(1 - t) + 2))

  d.bot.attr(rectAttr)
      .attr({y: l/2, height: .1})
      .style('stroke-width', (120*(1 - t) + 1))

  d.name.style('font-size', 23*(1 - t) + 'px')
      .attr({x: -l/2, y: l/2})

  d.date.style('font-size', 23*(1 - t) + 'px')
      .attr({x: l/2, y: l/2})
}

function clamp(min, d, max){
  return Math.min(max, Math.max(min, d))
} -->
<!-- </script> -->



</html>
